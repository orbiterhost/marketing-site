---
import Landing2 from "@/components/Landing2.astro";
import Copy from "../components/Copy.astro";
import HomeLayout from "@/layouts/HomeLayout.astro";
import "@/styles/globals.css";
import Features from "@/components/Features.astro";
import Contact from "@/components/Contact.astro";
import Footer from "@/components/Footer.astro";
import Testimonials from "@/components/Testimonials.astro";
import { CLI } from "@/components/CLI.tsx";
import PageWrapper from "@/components/PageWrapper";

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<script>
  function sendFrameReadyMessage() {
    const generateMessageId = () => {
      return Array(4)
        .fill(0)
        .map(() =>
          Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16),
        )
        .join("-");
    };

    const message = {
      id: generateMessageId(),
      type: "APPLY",
      path: ["ready"],
      argumentList: [{}],
    };

    if (window.ReactNativeWebView) {
      window.ReactNativeWebView.postMessage(JSON.stringify(message));
    } else {
      window.parent.postMessage(message, "*");
    }
  }

  sendFrameReadyMessage();
</script>

<HomeLayout>
  <PageWrapper client:load>
    <Landing2 />
    <Copy />
    <Features />
    <Testimonials />
    <CLI client:load />
    <Contact />
    <Footer />
  </PageWrapper>
</HomeLayout>
